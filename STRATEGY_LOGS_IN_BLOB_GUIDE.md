# Guide: Getting Trading Strategy Logs in Azure Blob

## Current Situation

✅ **Dashboard logs ARE in blob:**
- Path: `s0001strangle/logs/trading_2025Dec14.log`
- These are initialization messages (no account name)

❌ **Trading strategy logs are NOT in blob yet:**
- The logs you showed are from **local execution** (your Windows machine)
- They need to be generated by running the strategy **in Azure**

## What You Need to Do

### Step 1: Start Trading Strategy from Dashboard in Azure

1. Open your dashboard in Azure (e.g., `https://your-app.azurewebsites.net`)
2. Navigate to the "Live Trader" section
3. Enter your account details (Account: "Priti Sharma", API credentials, etc.)
4. Click "Start" to launch the trading strategy

### Step 2: Watch for `[STRATEGY]` Messages in Log Stream

When the strategy starts, you should see messages like:

```
[STRATEGY] Starting logging setup for account: Priti Sharma
[STRATEGY] Azure environment: True
[STRATEGY] [SETUP LOGGING] Starting logging setup - account_name=Priti Sharma
[STRATEGY] [SETUP LOGGING] Azure environment detected
[STRATEGY] [LOG SETUP] Setting up Azure Blob Storage logging for account: Priti Sharma
[STRATEGY] [AZURE BLOB] Checking configuration...
[STRATEGY] [AZURE BLOB] AZURE_BLOB_LOGGING_ENABLED = True
[STRATEGY] [AZURE BLOB] Connection string available: True
[STRATEGY] [AZURE BLOB] Container name: s0001strangle
[STRATEGY] [AZURE BLOB] Account name: Priti Sharma (will create folder: Priti)
[STRATEGY] [AZURE BLOB] Logging to Azure Blob: s0001strangle/Priti/logs/Priti_2025Dec14.log
[STRATEGY] [AZURE BLOB] Full blob path: s0001strangle/Priti/logs/Priti_2025Dec14.log
```

### Step 3: Check Azure Blob Container

After starting the strategy, check your blob container:

1. Go to **Azure Portal** → **Storage accounts** → `s0001str`
2. Click **Containers** → `s0001strangle`
3. Navigate to **`Priti/logs/`** folder
4. You should see: **`Priti_2025Dec14.log`**

This file will contain all the trading strategy logs:
- `[FLOW]` messages
- `[EXPIRY]` messages
- `[LOG SETUP]` messages
- Trading activity logs
- All the same logs you see locally

## Expected Log Locations

### Dashboard Logs (Currently Working)
- **Blob Path:** `s0001strangle/logs/trading_2025Dec14.log`
- **Contains:** Dashboard initialization messages
- **When:** Created when dashboard starts

### Trading Strategy Logs (After Starting Strategy)
- **Blob Path:** `s0001strangle/Priti/logs/Priti_2025Dec14.log`
- **Contains:** All trading activity (`[FLOW]`, `[EXPIRY]`, etc.)
- **When:** Created when you start the trading strategy from dashboard

## Troubleshooting

### If `[STRATEGY]` messages don't appear:

1. **Check if strategy started:**
   - Look for any error messages in log stream
   - Check dashboard status (should show "Running")

2. **Check environment variables:**
   - Ensure `AZURE_BLOB_LOGGING_ENABLED=True` in Azure Portal
   - Ensure `AzureBlobStorageKey` is set
   - Ensure `AZURE_BLOB_ACCOUNT_NAME` and `AZURE_BLOB_CONTAINER_NAME` are set

3. **Check subprocess output:**
   - The strategy runs as a subprocess
   - Its output should appear in the log stream
   - Look for any Python errors or import issues

### If logs appear in log stream but not in blob:

1. **Check blob handler:**
   - Look for `[AZURE BLOB] Successfully uploaded` messages
   - These confirm logs are being written to blob

2. **Check blob path:**
   - Verify the path matches: `Priti/logs/Priti_2025Dec14.log`
   - Account name "Priti Sharma" becomes folder "Priti"

3. **Check container name:**
   - Should be exactly `s0001strangle` (not `s0001strangle-log`)

## Summary

The logs you showed are from **local execution**. To get them in Azure Blob:

1. ✅ Start the trading strategy from the dashboard **in Azure**
2. ✅ Watch for `[STRATEGY]` messages in the log stream
3. ✅ Check the blob container at `Priti/logs/Priti_2025Dec14.log`

The code is already configured correctly - you just need to run the strategy in Azure!

